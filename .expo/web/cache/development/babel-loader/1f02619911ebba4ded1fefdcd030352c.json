{"ast":null,"code":"import api from \"./api\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { APP_STORAGE_TOKEN } from \"../constants/user.constants\";\nexport var createUser = function createUser(user_data) {\n  return api.post('api/user/create/', user_data).then(function (res) {\n    return {\n      errors: false,\n      data: res.data\n    };\n  }).catch(function (e) {\n    if (e.response) {\n      return {\n        errors: true,\n        data: e.response.data\n      };\n    }\n\n    return {\n      errors: false,\n      data: e\n    };\n  });\n};\nexport var createToken = function createToken(data) {\n  return api.post('api/user/token/', data).then(function (response) {\n    if (response.status == 200) {\n      return response.data;\n    }\n  }).catch(function (e) {\n    if (e.response) {\n      console.log(e.response);\n    }\n  });\n};\nexport var getMe = function getMe() {\n  return api.get('api/user/me/').then(function (res) {\n    console.log(res);\n  });\n};\nexport var updateToken = function updateToken(token) {\n  api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n};\nexport var defineInterceptor = function defineInterceptor() {\n  api.interceptors.request.use(function (request) {\n    var token = AsyncStorage.getItem(APP_STORAGE_TOKEN);\n\n    if (token) {\n      request.headers.common.Authorization = \"Bearer \" + token;\n    }\n  });\n};","map":{"version":3,"sources":["/home/dan/danXCode/mobile/enxutank-mobile/services/auth.js"],"names":["api","AsyncStorage","APP_STORAGE_TOKEN","createUser","user_data","post","then","res","errors","data","catch","e","response","createToken","status","console","log","getMe","get","updateToken","token","defaults","headers","common","defineInterceptor","interceptors","request","use","getItem","Authorization"],"mappings":"AAAA,OAAOA,GAAP;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AAEA,SAASC,iBAAT;AAGA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,SAAD,EAAe;AAErC,SAAOJ,GAAG,CAACK,IAAJ,CAAS,kBAAT,EAA6BD,SAA7B,EAAwCE,IAAxC,CAA6C,UAAAC,GAAG,EAAI;AACvD,WAAO;AAAEC,MAAAA,MAAM,EAAE,KAAV;AAAiBC,MAAAA,IAAI,EAAEF,GAAG,CAACE;AAA3B,KAAP;AACH,GAFM,EAEJC,KAFI,CAEE,UAAAC,CAAC,EAAI;AACV,QAAIA,CAAC,CAACC,QAAN,EAAgB;AACZ,aAAO;AAAEJ,QAAAA,MAAM,EAAE,IAAV;AAAgBC,QAAAA,IAAI,EAAEE,CAAC,CAACC,QAAF,CAAWH;AAAjC,OAAP;AACH;;AACD,WAAO;AAAED,MAAAA,MAAM,EAAE,KAAV;AAAiBC,MAAAA,IAAI,EAAEE;AAAvB,KAAP;AAEH,GARM,CAAP;AASH,CAXM;AAaP,OAAO,IAAME,WAAW,GAAG,SAAdA,WAAc,CAACJ,IAAD,EAAU;AACjC,SAAOT,GAAG,CAACK,IAAJ,CAAS,iBAAT,EAA4BI,IAA5B,EAAkCH,IAAlC,CAAuC,UAAAM,QAAQ,EAAI;AACtD,QAAIA,QAAQ,CAACE,MAAT,IAAmB,GAAvB,EAA4B;AACxB,aAAOF,QAAQ,CAACH,IAAhB;AACH;AACJ,GAJM,EAIJC,KAJI,CAIE,UAAAC,CAAC,EAAI;AACV,QAAIA,CAAC,CAACC,QAAN,EAAgB;AACZG,MAAAA,OAAO,CAACC,GAAR,CAAYL,CAAC,CAACC,QAAd;AACH;AACJ,GARM,CAAP;AASH,CAVM;AAYP,OAAO,IAAMK,KAAK,GAAG,SAARA,KAAQ,GAAM;AACvB,SAAOjB,GAAG,CAACkB,GAAJ,CAAQ,cAAR,EAAwBZ,IAAxB,CAA6B,UAACC,GAAD,EAAS;AACzCQ,IAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACH,GAFM,CAAP;AAGH,CAJM;AAMP,OAAO,IAAMY,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;AAClCpB,EAAAA,GAAG,CAACqB,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4B,eAA5B,gBAAyDH,KAAzD;AACH,CAFM;AAIP,OAAO,IAAMI,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAEnCxB,EAAAA,GAAG,CAACyB,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA6B,UAAAD,OAAO,EAAI;AACpC,QAAMN,KAAK,GAAGnB,YAAY,CAAC2B,OAAb,CAAqB1B,iBAArB,CAAd;;AACA,QAAIkB,KAAJ,EAAW;AACPM,MAAAA,OAAO,CAACJ,OAAR,CAAgBC,MAAhB,CAAuBM,aAAvB,eAAiDT,KAAjD;AACH;AACJ,GALD;AAMH,CARM","sourcesContent":["import api from './api';\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nimport { APP_STORAGE_TOKEN } from \"../constants/user.constants\";\n\n\nexport const createUser = (user_data) => {\n\n    return api.post('api/user/create/', user_data).then(res => {\n        return { errors: false, data: res.data };\n    }).catch(e => {\n        if (e.response) {\n            return { errors: true, data: e.response.data }\n        }\n        return { errors: false, data: e }\n\n    })\n}\n\nexport const createToken = (data) => {\n    return api.post('api/user/token/', data).then(response => {\n        if (response.status == 200) {\n            return response.data\n        }\n    }).catch(e => {\n        if (e.response) {\n            console.log(e.response)\n        }\n    })\n}\n\nexport const getMe = () => {\n    return api.get('api/user/me/').then((res) => {\n        console.log(res)\n    })\n}\n\nexport const updateToken = (token) => {\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n}\n\nexport const defineInterceptor = () => {\n\n    api.interceptors.request.use(request => {\n        const token = AsyncStorage.getItem(APP_STORAGE_TOKEN)\n        if (token) {\n            request.headers.common.Authorization = `Bearer ${token}`;\n        }\n    });\n}"]},"metadata":{},"sourceType":"module"}